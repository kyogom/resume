`IBM在籍時` `お客様：薬局` 

# 参画期間
2018年7月〜2019年4月

# プロジェクト発足の経緯
「対物業務から対人業務へ」という医療協会の報酬体系見直し※1 により、全国に700店舗以上を展開する薬局チェーンがひとりひとりの顧客に合った業務を遂行できる支援システムを必要とした。

※1 従来の、薬を提供することで得られる調剤料を引き下げ、かかりつけ薬剤指導料を始めとする対人業務の報酬を引き上げた

# プロジェクト概要

## プロジェクト参画フェーズ
要件定義が進み、画面デザインが出来上がったタイミング

## システム概要
薬局に来店する顧客の情報を蓄積し、機械学習をつかって監査※2 ・服薬指導※3 の支援を行う

※2 監査... 処方箋に記載された薬剤の組み合わせが安全か、処方箋に記載された薬剤が患者の性別・体重・アレルギー...etcを考慮して安全か確認する
※3 服薬指導... 患者に薬を渡す際に、副作用について説明したり、体調の変化について質問したり等コミュニケーションを取ること

### フレームワーク等
Node.js
Angular
MySQL
Redhat

監査の支援
・投薬量が基準値より高すぎたり低すぎたりした場合にアラートを表示
・全国の過去の処方の分布に対して、今回の処方が珍しい場合にアラート

服薬指導の支援
・過去の類似の処方から、どのような服薬指導を行ったか表示する

## チームの体制
![](https://user-images.githubusercontent.com/23183700/68636036-a8b80e80-053d-11ea-8ba7-fd6b63049f9c.png)


## チームメンバーとの関わり
ランチ会などを主催し、積極的にコミュニケーションを取っていたため、作業の遅れを察知できた。
アプリ開発と分析チーム間でも齟齬が発生しにくく、オンスケジュールで作業できた。


## 自分の役割
開発能力が評価され、 **他部門から指名** を受け、**開発リード** として参画。
アプリチーム・機械学習チームの両チームの設計・開発を計画した。
DB設計から開発までをリードしたため、システム全体の理解が求められた。
また、薬剤師の業務についても、薬剤師の教科書を読んだり、診療報酬についての参考書を読んで大まかな理解をした。
 
# 自分の貢献

## 課題
１．既存システムとの連携
２．分析チームとのコミュニケーション

## 実行したこと

### 既存システムの理解
既存システムで認証が完了した際に、開発する新規システムでも同時に認証が完了するよう、認証情報の受け渡しをする必要があった。
そのため、Delphiで書かれた既存システムについて学んだ。
特に認証部分に関しては、


# プロジェクトで得た学び
## 考え

**- コミュニケーションによって手戻りを大幅に減らせる**   
チームメンバーが１０人以下ということもあり、密接なコミュニケーションが可能であった。  
また、それぞれの作業場所が近く、会話が聞こえる範囲にチームがまとまっていたため、手戻りが少なく済んだ。  

**- 進捗はカンバンで一元管理可能**  
このプロジェクトに参画するまで、複数のExcelファイルのWBSでスケジュールを管理していたが、  
カンバン機能を持ったツールをうまく使うことで、進捗の一元管理が可能である例を知ることができた。  

## スキル
**認証**   
JWTを使った認証がなぜ安全かクライアントに説明する機会があり、シーケンス図を用いて説明することができた。  

**デザイン**   
デザインレビューを行うにあたり、デザインの考え方を学ぶ必要が出てきた。  
「なんとなくどのサービスでもこのボタンは上にあるよね」というような自分のする指摘の曖昧さに疑問を感じたためである。  

師となる人物として、[上野学](https://twitter.com/manabuueno) を見つけ、著作物からデザインにおける原則を学び、デザインレビューの際に言葉をお借りした。

**D3.jsによるグラフ描画**   
「こういう予測値を可視化したい」という分析チームの要望から、最適な図を選択し、実装することができた。  
また、それぞれの実装の難しさを知ることができた。 

`ネットワーク図` ※実際に作成した図では有りません  
![](https://qph.fs.quoracdn.net/main-qimg-eeaf7985a12675b312d41844ba58e50d.webp)

特定のノードを拡大して初期表示する実装が難しかった。  
また、RDBから取得した情報を結合してJSON配列に変換する際にコードが複雑になりがちだったので、underscore.jsを採用して短く書くことができた。  


`棒グラフ` ※実際に作成した図では有りません  
![](http://www.fumiononaka.com/TechNotes/Images/FN1702011_002.png)

上記のような棒グラフに加え、「今回の処方」というツールチップを特定の棒の上に座標指定で表示する処理が難しかった。

`ワードクラウド` ※実際に作成した図では有りません  
![](https://dnaimg.com/2012/02/15/interactive-and-animated-word-cloud/05.jpg)

レスポンシブ対応が難しかった。  
それぞれの文字の角度や位置が乱数で決定されるため、ウィンドウサイズを変更するごとに図が再描画され、文字の位置や角度が変わってしまうバグが有った。  
ライブラリの内部ロジックを改変して、常に同じ角度と位置で表示されるようにすることで解決できた。  


## 作成記事
・[10分で作れる社員用ランチマップを紹介したい](https://qiita.com/kyogom/items/720a8c5023900b8e9b1f)  
・[webアプリにPCのアプリケーションを呼び出すリンクを作る方法](https://kyogom.com/tech/web-native-app-sync/)  
